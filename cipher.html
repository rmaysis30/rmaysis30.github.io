<!doctype html>
<html>
  <head>
    <title>Cipher Example</title>
    <script type="text/javascript">


     
      function encrypt() {
        var input = plaintext.value.toUpperCase();
        var myAdder = parseInt(adder.value);
        var myMultiplier = parseInt(multiplier.value);


        var output = "";
        for (var i = 0; i < input.length; i = i + 1) {
          output+= encrypt_character(input[i], myAdder, myMultiplier);
          // WORK:
          // Call encrypt_character with the arguments input[i], myAdder, myMultiplier
          // and concatenate the returned value to output.


        }
        ciphertext.value = output;
      }

ion encrypt_character(character, myAdder, myMultiplier) {
        if (!isAlpha(character)) {
          return character;
        }
        var transformedCharCode = -1;
        transformedCharCode = characterToNumber(character)-65;
        transformedCharCode *= myMultiplier;
        transformedCharCode += myAdder;
        transformedCharCode = transformedCharCode %26;
        transformedCharCode += 65;
        
        // WORK:
        // Encrypt the character. Remember that "A" -> 65 in ASCII, so you'll first need to subtract
        // characterToNumber("A") and then add it back in before calling numberToCharacter.


        return numberToCharacter(transformedCharCode);
      }


     
      function decrypt() {
        var input = ciphertext.value.toUpperCase();
        var myAdder = parseInt(adder.value);
        var myMultiplier = parseInt(multiplier.value);


        var output = "";
        for (var i = 0; i < input.length; i = i + 1) {
          output+= decrypt_character(input[i], myAdder, myMultiplier);
          // WORK:
          // Call decrypt_character with the arguments input[i], myAdder, myMultiplier
          // and concatenate the returned value to output.


        }
        plaintext.value = output;
      }


  
      function decrypt_character(character, myAdder, myMultiplier) {
        if (!isAlpha(character)) {
          return character;
        }
        var transformedCharCode = -1;
        transformedCharCode = characterToNumber(character)-65;
        transformedCharCode += myAdder;
        transformedCharCode *= myMultiplier;
        transformedCharCode = transformedCharCode % 26;
        transformedCharCode += 65;
        
        // WORK:
        // Encrypt the character. Remember that "A" -> 65 in ASCII, so you'll first need to subtract
        // characterToNumber("A") and then add it back in before calling numberToCharacter.


        return numberToCharacter(transformedCharCode);
      }


   
      function invert() {
        var myAdder = parseInt(adder.value);
        var myMultiplier = parseInt(multiplier.value);
        var inverseAdder = -1;
        var inverseMultiplier = -1;
        
        for (var r=0; r<=25; r++){
          var checkAdd = myAdder+r;
          if (checkAdd%26 == 0){
            inverseAdder = r;
          }
          var check = myMultiplier*r;
          if (check%26 == 1){
            inverseMultiplier = r;
          }
        }


        // WORK:
        // LOOP OVER THE NUMBERS BETWEEN 0 and 26 here. Once you find the number x such that
        // (myAdder + x) % 26 == 0, set myAdder = x
        //
        // Ditto, when you find the number y such that
        // (myMultiplier * y) % 26 == 1, set myMultiplier = y


        adder.value = inverseAdder;
        multiplier.value = inverseMultiplier;
      }


    
      function isAlpha(character) {
        return character >= "A" && character <= "Z";
      }


      
      function characterToNumber(character) {
        return character.charCodeAt(0);
      }


      
      function numberToCharacter(num) {
        return String.fromCharCode(num);
      }


    </script>
  </head>
  <body>
    <h1>ENCRYPTOR!!</h1>
    <h3>Rhymes with TROGDOR!!</h3>
    <p>Instructions
    </p><ol>
      <li>Input a multiplier, i.e., a positive number coprime to 26.</li>
      <li>Input an adder, i.e., a nonnegative number.</li>
      <li>If you want to <i>encrypt</i> text, put the text in the Plaintext box and hit Encrypt.</li>
      <li>If you want to <i>decrypt</i> text, put the text in the Ciphertext box and hit Decrypt.</li>
      <li>If you want to <i>invert</i> the adder and multiplier, click Invert.</li>
    </ol>
    <table>
      <tr><td>Multiplier</td><td><input type="number" id="multiplier"></td></tr>
      <tr><td>Adder     </td><td><input type="number" id="adder"></td></tr>
      <tr><td>Plaintext </td><td><input type="text" id="plaintext"></td></tr>
      <tr><td>Ciphertext</td><td><input type="text" id="ciphertext"></td></tr>
      <tr><td><button onclick="encrypt();">Encrypt</button></td><td><button onclick="decrypt();">Decrypt</button></td></tr>
      <tr><td><button onclick="invert();">Invert</button></td><td></td></tr>
    </table>


  </body>
</html>
